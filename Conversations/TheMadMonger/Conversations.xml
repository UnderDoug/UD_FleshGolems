<?xml version="1.0" encoding="utf-8" ?>
<conversations>
  <conversation ID="UD_FleshGolems Mad Monger">
    <node ID="choices">
      <!-- 
      
      This is what the player "says" to go to the "Target" "node ID" 
      (the availability of a choice can be conditional, too)
      
      -->
      <choice ID="GoEnd" Target="End">
        <text IfTrueKin="true" Priority="1">
          Live and drink.
        </text>
        <text IfHavePart="Chimera" Priority="1">
          Live and... Mong?
        </text>
        <text IfHavePart="Esper" Priority="1">
          Who'd want to meet meat?
        </text>
        <text>
          Live and drink.
        </text>
      </choice>

      <choice ID="GoPostGreeting" Target="PostGreeting" IfNotLastChoice="GoPostGreeting">
        <text>There was something else...</text>
        <part Name="Tag">{{K|[start over]}}</part>
      </choice>

      <choice ID="Trade" Load="Merge">
        <text IfTrueKin="true" Priority="1">
          You mentioned goodies?
        </text>
        <text IfHavePart="Chimera" Priority="1">
          Meat??
        </text>
        <text IfHavePart="Esper" Priority="1">
          Show me your wares.
        </text>
        <text>
          Let's trade.
        </text>
        <part Name="Trade" />
      </choice>

      <choice ID="AskWhyMeMeat" Target="AnswerWhyYouMeat" IfNotLastChoice="AskWhyMeMeat">
        <text IfHavePart="Esper" Priority="1">
          Why do you call me grey meat?
        </text>
        <text IfTruekin="True" Priority="1">
          Why do you call me rare meat?
        </text>
        <text IfHavePart="Chimera" Priority="1">
          Why do you call me prime meat?
        </text>
        <text>
          Why do you call me meat?
        </text>
      </choice>

      <choice ID="AskWhatYouWorkOn" Target="AnswerWhatIWorkOn" IfNotLastChoice="AskWhatYouWorkOn">
        <text>
          What are you doing with that mess?
        </text>
      </choice>

      <!--
  ####################################
  ### Choice Templates
  ####################################
  
    # Note: Fully replace [Something] with whatever the thing is: [Something] -> TheThing
    # Note2: use a comment anywhere special behavior should be included, I'll see what I can do.
    # Note3: copy/paste liberally to avoid errors.
  
  
    # Regular Choice:
    - ID and Target are the same except the prefixed "verb" helps to distinguish between the choice and its target.
    - IfNotLastChoice="Ask[WhatTheQuestionWas]" ensures it won't show up in <node ID="Answer[WhatTheQuestionWas]">
    - Should have a corresponding <node ID="Answer[WhatTheQuestionWas]">, and have an entry in <node ID="AlwaysHaveChoices">
  
      <choice ID="Ask[WhatTheQuestionWas]" Target="Answer[WhatTheQuestionWas]" IfNotLastChoice="Ask[WhatTheQuestionWas]">
        <text IfTrueKin="true" Priority="1">
          Am I a true kin?!
        </text>
        <text IfHavePart="Chimera" Priority="1">
          Am I a chimera?!
        </text>
        <text IfHavePart="Esper" Priority="1">
          Am I an esper?!
        </text>
        <text>
          Am I not really speacial at all?!
        </text>
      </choice>
      
      
    # State Changing Conditional Choice:
    - Sets a "state" when picked.
    - Has different <text> based on same condition.
    - Conditions inside <choice [here]> affect the entire choice.
    - Conditions inside <text [here]> affect only that piece of text.
    - See BaseGameConversationConditions.md for full set of conditions.
    - use SetBooleanState="UD_FleshGolems_[WhatWasSaid],true" to set a simple true/false
      - Name of set state: UD_FleshGolems_[WhatWasSaid]
      - Value to set to: true
      - Check with IfTestState="UD_FleshGolems_[WhatWasSaid]" or IfNotHaveState="UD_FleshGolems_[WhatWasSaid]"
      
      <choice ID="Say[WhatToSay]" Target="React[WhatWasSaid]"
              SetBooleanState="UD_FleshGolems_[WhatWasSaid],true">
        <text IfNotHaveState="UD_FleshGolems_[WhatWasSaid]">I said a thing!</text>
        <text IfTestState="UD_FleshGolems_[WhatWasSaid]">I am saying a thing, again!</text>
      </choice>
      
      
    # Conditional Choice:
    - Choice is only available when UD_FleshGolems_[WhatWasSaid] tests true.
    - Conditions inside <choice [here]> affect the entire choice.
    - Conditions inside <text [here]> affect only that piece of text.
    - See BaseGameConversationConditions.md for full set of conditions.
      
      <choice ID="Ask[AQuestion]" Target="Respond[AQuestion]" IfTestState="UD_FleshGolems_[WhatWasSaid]">
        <text>Questioned?</text>
      </choice>
      
      -->
    </node>

    <node ID="BaseSequence">
      <choice UseID="GoEnd" />
    </node>
    
    <node ID="AlwaysHaveChoices" Inherits="BaseSequence">
      <choice UseID="AskWhatYouWorkOn" />
      <choice UseID="AskWhyMeMeat" />
      <!-- put entries above here; order matters -->
      <choice UseID="GoPostGreeting" />
      <choice UseID="Trade" />
    </node>

    <!-- 
####################################
### Templates
####################################
  
  # Note: Fully replace [Something] with whatever the thing is: [Something] -> TheThing
  # Note2: use a comment anywhere special behavior should be included, I'll see what I can do.
  # Note3: copy/paste liberally to avoid errors.
  
  
  # Regular Node:
  - Inherits="AlwaysHaveChoices" means it will always have the choices available from the inherited node.
  - Should have a corresponding "choice" in both <node ID="choices"> and <node ID="AlwaysHaveChoices">
  - These are sort of one-and-done snippets that can be re-asked later and take a single node to answer.
    
    <node ID="Answer[WhatTheQuestionWas]" Inherits="AlwaysHaveChoices">
      <text IfTrueKin="true" Priority="1">
        You are a true kin!
      </text>
      <text IfHavePart="Chimera" Priority="1">
        You are a chimera!
      </text>
      <text IfHavePart="Esper" Priority="1">
        You are an esper!
      </text>
      <text>
        You are not really speacial at all!
      </text>
    </node>


  # Sequence Node:
  - Inherits="BaseSequence" means it will always have the "exit conversation" option, but will need each choice in the sequence added.
  - Should have the first "choice" of the sequence in both <node ID="choices"> and <node ID="AlwaysHaveChoices">
  - Last "choice" should return (probably) to <choice UseID="GoPostGreeting" />

    <node ID="Answer[StepInSequence]">
      <text IfTrueKin="true" Priority="1">
        You are a true kin!
      </text>
      <text IfHavePart="Chimera" Priority="1">
        You are a chimera!
      </text>
      <text IfHavePart="Esper" Priority="1">
        You are an esper!
      </text>
      <text>
        You are not really speacial at all!
      </text>
      
      <choice ID="Ask[NextStepInSequence]" Target="Answer[NextStepInSequence]">
        <text IfTrueKin="true" Priority="1">
          I am a true kin!
        </text>
        <text IfHavePart="Chimera" Priority="1">
          I am a chimera!
        </text>
        <text IfHavePart="Esper" Priority="1">
          I am an esper!
        </text>
        <text>
          I am not really speacial at all!
        </text>
      </choice>
      <choice UseID="Trade" />
      <choice UseID="GoEnd" />
    </node>


  # Special, "no escape" Node:
  - Doesn't inherit at all, so it needs the relevant choices added in.
  - It can't be escaped from, so it should be used for nodes that require a decision _right_now_
  - can be chained similar to the above to have an inescapable sequence.
  - Corresponding "choice" shoul

    <node ID="Answer[SpecialScenario]" AllowEscape="false">
      <text IfTrueKin="true" Priority="1">
        You are a true kin!
      </text>
      <text IfHavePart="Chimera" Priority="1">
        You are a chimera!
      </text>
      <text IfHavePart="Esper" Priority="1">
        You are an esper!
      </text>
      <text>
        You are not really speacial at all!
      </text>
      
      <choice ID="Say[NextSpecialScenario]" Target="Respond[NextSpecialScenario]" >
        <text IfTrueKin="true" Priority="1">
          I am a true kin!
        </text>
        <text IfHavePart="Chimera" Priority="1">
          I am a chimera!
        </text>
        <text IfHavePart="Esper" Priority="1">
          I am an esper!
        </text>
        <text>
          I am not really speacial at all!
        </text>
      </choice>
    </node>
    -->
    
    <!-- 
    
    Actual convo starts here
    
    -->
    
    <start ID="Greeting" Inherits="AlwaysHaveChoices">
      <text IfHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2">
        Oh ho! I see you've brought that slavering failure of an attempt to ascertain.
        
        Try to keep its leaking everywhere away from my equipment.
        
        I don't want its mank griming up my work.
      </text>
      <text IfTrueKin="true" Priority="1">
        Why if it isn't the meat that fancies itself nobility.~
        Do you have to have all of those machines implanted? They make perfoming vivisections so annoying.~
        Does the rare meat wish to purchase more meat? Perhaps there's a goodie or two you could use.~
        You'd be better served 'becoming' my test subject.
      </text>
      <text IfHavePart="Chimera" Priority="1">
        Your biology is so......unstable, fasinating.~
        May I have a limb or two, you can surely spare at least one.~
        So much material to work with!!!~
        Would you like to purchase a snack, gargantuan meat? There must be something here to your liking.
      </text>
      <text IfHavePart="Esper" Priority="1">
        Grey meat, the second worst kind, so little viable material.~
        When your mind is inevitably consumed by sights older than sight, may I have your remains?~
        Would you like to purchase something? Perhaps it can provide a little comfort while you cower from unseen "eyes".~
        One wrong step and I activate my normalitly field.
      </text>
      <text>
        Salutations, meat.~
        May I have your legs? I promise to return them.~
        Would you kindly lay upon this table here, I assure you that it is entirly safe.~
        Would you like to purchase something, meat?
      </text>
    </start>
    
    <!-- Returning directly to the start feels strange, so the below acts as a landing node for the "there was something else" choice -->
    <node ID="PostGreeting" Inherits="AlwaysHaveChoices">
      <text IfTrueKin="true" Priority="1">
        Oh, the liege lord wants of =player.possessive= subject?
      </text>
      <text IfHavePart="Chimera" Priority="1">
        The beast speaks.
      </text>
      <text IfHavePart="Esper" Priority="1">
        As a gray worm in my ear, I'm sure.
      </text>
      <text>
        Out with it then, meat.
      </text>
    </node>
    
    <node ID="AnswerWhyYouMeat" Inherits="AlwaysHaveChoices">
      <text IfTrueKin="true" Priority="1">
        Rare meat, yes, though rare may be a misnomer, I speak only in terms of the difficulty of finding materials like yours, not to the value that they provide; worthless meat may be a more accurate descriptor.
      </text>
      <text IfHavePart="Chimera" Priority="1">
        Prime meat, yes, for your body is as ever-changing and adapting as my unfathomablely vast intellect, so much room for error too, so much excess material. You are the height of usefulness to me.
      </text>
      <text IfHavePart="Esper" Priority="1">
        Grey meat, yes, for only your brain is of interest to me. The rest of you is as immutable as the form of those worthless and yet tantalizingly metal-laced animals who strut around as though they are the children of gods.
      </text>
      <text>
        Meat, yes, would you prefer I say materials, components, resources? You are a walking sack of things I find moderately useful. Be grateful I've decided not to harvest you for the time being.
      </text>
    </node>
    
    <node ID="AnswerWhatIWorkOn">
      <!--text IfHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2" AllowEscape="false">
        My mess?? And what of {{Y|your}} mess, meat?

        How Jofo Qudwufo hasn't made actual {{UD_FleshGolem_meat|meat}} of you yet is a wonder to me.
        
        I'm, understandably, reticent to discuss such a... meaty endeavour, with that squelching affront to my work heaving nearby.
      </text-->
      <text>
        Perchance, lesser mind, what, pray, does it {{Y|appear}} I might be doing?
      </text>
      <!-- choices can have their text changed on the fly on a per-node basis -->
      <choice UseID="GoPostGreeting" IfNotHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2">
        <text>
          Rightio, then! There was something else...
        </text>
      </choice>
      <!--choice GotoID="IMeanIt" IfHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2">
      <choice UseID="Trade" IfNotHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2" />
      <choice UseID="GoEnd" IfNotHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2" />
        <text>
          ...
        </text>
      </choice-->
    </node>
    
    <node ID="IMeanIt" AllowEscape="false">
      <text>
        Go on then...
        
        Get.
      </text>
      <choice GotoID="IReallyMeanIt">
        <text>
          ...
        </text>
      </choice>
    </node>
    
    <node ID="IReallyMeanIt" AllowEscape="false">
      <text>
        ...
        
        Meat! Go!
      </text>
      <choice UseID="GoEnd">
        <text>
          {{emote|*sigh*}} ...fine.
        </text>
      </choice>
    </node>
    
  </conversation> 
</conversations>
