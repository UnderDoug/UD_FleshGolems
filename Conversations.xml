<?xml version="1.0" encoding="utf-8" ?>
<conversations>
  <conversation ID="UD_FleshGolems NewlyReanimatedBeings">
    
    <node ID="choices">
      <choice ID="JoinPartyChoice" IfSourceOfSuffering="true">
        <text>Come along now... {{r|friend}}.</text>
        <part Name="WaterRitualJoinParty" />
      </choice>
      <choice ID="GoEnd" Target="End">
        <text IfSourceOfSuffering="true">Uh... Sorry?</text>
        <text IfSourceOfSuffering="false">Unlive and drink...</text>
      </choice>
    </node>
    <node ID="Start">
      <text IfSourceOfSuffering="false">
        Hrgh.. urgh.. ghuh?~
        Unlive..... and drink???~
      </text>
      <text>
        Wh- why??~
        {{emote|*wilhelm scream*}}
      </text>
      <choice UseID="JoinPartyChoice" />
      <choice UseID="GoEnd" />
    </node>
  </conversation>

  <conversation ID="UD_FleshGolems Mad Monger">
    <node ID="choices">
      <!-- 
      
      This is what the player "says" to go to the "Target" "node ID" 
      (the availability of a choice can be conditional, too)
      
      -->
      <choice ID="GoEnd" Target="End">
        <text IfTrueKin="true" Priority="1">
          Live and drink.
        </text>
        <text IfHavePart="Chimera" Priority="1">
          Live and... Mong?
        </text>
        <text IfHavePart="Esper" Priority="1">
          Who'd want to meet meat?
        </text>
        <text>
          Live and drink.
        </text>
      </choice>

      <choice ID="GoPostGreeting" Target="PostGreeting">
        <text>There was something else...</text>
        <part Name="Tag">{{K|[start over]}}</part>
      </choice>

      <choice ID="Trade" Load="Merge">
        <text IfTrueKin="true" Priority="1">
          You mentioned goodies?
        </text>
        <text IfHavePart="Chimera" Priority="1">
          Meat??
        </text>
        <text IfHavePart="Esper" Priority="1">
          Show me your wares.
        </text>
        <text>
          Let's trade.
        </text>
        <part Name="Trade" />
      </choice>
      
      <choice ID="Diatribe"
        <text IfHavePart="Esper" Priority="1">
          Why do you call me grey meat?
        </text>
         <text IfTruekin="True" Priority="1">
          Why do you call me rare meat?
        </text>
        <text IfHavePart="Chimera" Priority="1">
          Why do you call me prime meat?
        <text>
          Why do you call me meat? 
        </text>
        </choice>


          
      <choice ID="WhatYouDoing" Target="WhatImDoing">
        <text>
          What are you doing with that mess?
        </text>
      </choice>

      <!--
      
      this is an example of a choice that changes the game state
       - when we've complimented the MadMong, the game records that we've done so and the text of the choice changes to reflect that
      
      <choice ID="GoLookingFly" Target="ReactLookingFly"
              SetBooleanState="UD_FleshGolems_Complimented_MadMong,true">
        <text IfNotHaveState="UD_FleshGolems_Complimented_MadMong">Looking fly, there, MadMong! Anyone ever tell you that?</text>
        <text IfTestState="UD_FleshGolems_Complimented_MadMong">Looking fly, as always, MadMong!</text>
      </choice>
      
      
      this is an example of a choice that is only available when some other condition is met
       - if the game has a record that we've complimented the MadMong, then we get an additional choice to ask them if we're being ignored
       - the text of the choice can also be conditionally controlled like above
      
      <choice ID="GoDidYouHearMe" Target="ReactDidYouHearMe" IfTestState="UD_FleshGolems_Complimented_MadMong">
        <text>MadMong, are you ignoring me?</text>
      </choice>
      
      -->
    </node>

    <!-- 
    
    Actual convo starts here
    
    -->
    
    <start ID="Greeting">
      <text IfHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2">
        Oh ho! I see you've brought that slavering failure of an attempt to ascertain.
        
        Try to keep its leaking everywhere away from my equipment.
        
        I don't want its mank griming up my work.
      </text>
      <text IfTrueKin="true" Priority="1">
        Why if it isn't the meat that fancies itself nobility.~
        Do you have to have all of those machines implanted? They make perfoming vivisections so annoying.~
        Does the rare meat wish to purchase more meat? Perhaps there's a goodie or two you could use.~
        You'd be better served 'becoming' my test subject.
      </text>
      <text IfHavePart="Chimera" Priority="1">
        Your biology is so......unstable, fasinating.~
        May I have a limb or two, you can surely spare at least one.~
        So much material to work with!!!~
        Would you like to purchase a snack, gargantuan meat? There must be something here to your liking.
      </text>
      <text IfHavePart="Esper" Priority="1">
        Grey meat, the second worst kind, so little viable material.~
        When your mind is inevitably consumed by sights older than sight, may I have your remains?~
        Would you like to purchase something? Perhaps it can provide a little comfort while you cower from unseen "eyes".~
        One wrong step and I activate my normalitly field.
      </text>
      <text>
        Salutations, meat.~
        May I have your legs? I promise to return them.~
        Would you kindly lay upon this table here, I assure you that it is entirly safe.~
        Would you like to purchase something, meat?
      </text>
      <choice UseID="WhatYouDoing" />
      <choice UseID="Trade" />
      <choice UseID="GoEnd" />
      <choice UseID="Diatribe" />
    </start>

    <!-- Returning directly to the start feels strange, so the below acts as a landing node for the "there was something else" choice -->
    <node ID="PostGreeting">
      <text IfTrueKin="true" Priority="1">
        Oh, the liege lord wants of =player.possessive= subject?
      </text>
      <text IfHavePart="Chimera" Priority="1">
        The beast speaks.
      </text>
      <text IfHavePart="Esper" Priority="1">
        As a gray worm in my ear, I'm sure.
      </text>
      <text>
        Out with it then, meat.
      </text>
      <choice UseID="WhatYouDoing" />
      <choice UseID="Trade" />
      <choice UseID="GoEnd" />
      <choice UseID="Diatribe"/>
    </node>
    <node ID="Diatribe"> 
      <text IfHavePart="Esper" Priority="1">
        Grey meat, yes, for only your brain is of interest to me. The rest of you is as immutable as the form of those worthless and yet tantalizingly metal-laced animals who strut around as though they are the children of gods.
      </text>
      <text IfHavePart="Chimera" Priority="1">
        Prime meat, yes, for your body is as ever-changing and adapting as my unfathomablely vast intellect, so much room for error too, so much excess material. You are the height of usefulness to me. 
      </text>
      <text IfTrueKin="true" Priority="1">
        Rare meat, yes, though rare may be a misnomer, I speak only in terms of the difficulty of finding materials like yours, not to the value that they provide; worthless meat may be a more accurate descriptor. 
      </text>
      <text>
        Meat, yes, would you prefer I say materials, components, resources? You are a walking sack of things I find moderately useful. Be grateful I've decided not to harvest you for the time being.
      </text>
    </node>
      


        
    <node ID="WhatImDoing">
      <text IfHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2">
        My mess?? And what of {{Y|your}} mess, meat?

        How Jofo Qudwufo hasn't made actual {{UD_FleshGolem_meat|meat}} of you yet is a wonder to me.
        
        I'm, understandably, reticent to discuss such a... meaty endeavour, with that squelching affront to my work heaving nearby.
      </text>
      <text>
        Perchance, lesser mind, what, pray, does it {{Y|appear}} I might be doing?
      </text>
      <!-- choices can have their text changed on the fly on a per-node basis -->
      <choice UseID="GoPostGreeting" IfNotHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2">
        <text>
          Rightio, then! There was something else...
        </text>
      </choice>
      <choice UseID="Trade" IfNotHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2" />
      <choice UseID="GoEnd" IfNotHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2" />
      <choice GotoID="IMeanIt" IfHaveCompanionWithBlueprint="UD_FleshGolems Jofo Qudwufo" Priority="2">
        <text>
          ...
        </text>
      </choice>
    </node>
    
    <node ID="IMeanIt" AllowEscape="false">
      <text>
        Go on, then.
        
        Get.
      </text>
      <choice GotoID="IReallyMeanIt">
        <text>
          ...
        </text>
      </choice>
    </node>
    
    <node ID="IReallyMeanIt" AllowEscape="false">
      <text>
        ...
        
        Meat! Go!
      </text>
      <choice UseID="GoEnd">
        <text>
          {{emote|*sigh*}}... fine.
        </text>
      </choice>
    </node>
  </conversation> 
        
  <conversation ID="UD_FleshGolems Jofo Qudwufo">
    <node ID="choices">
      <choice ID="GoEnd" Target="End">
        <text IfTestState="UD_FleshGolems_Reacted_HelpFindMadMonger" Priority="3">Let's keep looking, =refname=.</text>
        <text IfTestState="UD_FleshGolems_Asked_HelpFindMadMonger" Priority="2">Let's start looking, =refname=.</text>
        <text IfTestState="UD_FleshGolems_Asked_WhereMadMonger" Priority="1">Live and drink, =refname=.</text>
        <text>Live and drink.</text>
      </choice>
      
      <choice ID="GoStart" Target="Start">
        <text>There was something else...</text>
        <part Name="Tag">{{K|[start over]}}</part>
      </choice>
      
      <choice ID="AskWhoMadMonger" Target="ReactWhoMadMonger"
              SetBooleanState="UD_FleshGolems_Asked_WhoMadMonger,true">
        <text IfNotHaveState="UD_FleshGolems_Asked_WhoMadMonger">The Mad 'Monger?</text>
        <text IfTestState="UD_FleshGolems_Asked_WhoMadMonger">Remind me who the Mad 'Monger is?</text>
      </choice>
      
      <choice ID="AskHeMadeYou" Target="ReactHeMadeYou"
              IfTestState="UD_FleshGolems_Asked_WhoMadMonger"
              SetBooleanState="UD_FleshGolems_Asked_HeMadeYou,true">
        <text IfNotHaveState="UD_FleshGolems_Asked_HeMadeYou">The Mad 'Monger {{Y|made}} you??</text>
        <text IfTestState="UD_FleshGolems_Asked_HeMadeYou">Did the Mad 'Monger {{Y|really}} make you?</text>
      </choice>
      
      <choice ID="AskWhereMadMonger" Target="ReactWhereMadMonger"
              IfTestState="UD_FleshGolems_Asked_HeMadeYou"
              SetBooleanState="UD_FleshGolems_Asked_WhereMadMonger,true">
        <text IfNotHaveState="UD_FleshGolems_Asked_WhereMadMonger">Where is this supposedly Mad 'Monger?</text>
        <text IfTestState="UD_FleshGolems_Asked_WhereMadMonger">Where is the Mad 'Monger, again?</text>
      </choice>
      
      <choice ID="AskHelpFindMadMonger" Target="ReactHelpFindMadMonger"
              IfTestState="UD_FleshGolems_Asked_WhereMadMonger"
              SetBooleanState="UD_FleshGolems_Asked_HelpFindMadMonger,true">
        <text IfNotHaveState="UD_FleshGolems_Asked_HelpFindMadMonger">Would you like help finding him?</text>
        <text IfTestState="UD_FleshGolems_Asked_HelpFindMadMonger">I'll help you find the Mad 'Monger.</text>
      </choice>
    </node>
    
    <!-- Actual convo starts here -->
    <start ID="Greeting">
      <text>
        Reh, reh! Am Jofo Qudwufo, ref-{{emote|*retch*}} ...renemit snaphjaf!

        Yoo... yoo not-{{emote|*hock*}} eh.. hmm...

        See yoo... Fruf! Seen seen?? {{emote|*snap-snap*}} d... Mad 'Monger?!
      </text>
      <choice UseID="AskWhoMadMonger" />
      <choice UseID="AskHeMadeYou" />
      <choice UseID="AskWhereMadMonger" />
      <choice UseID="AskHelpFindMadMonger" />
      <choice UseID="GoEnd" />
    </start>

    <start ID="OfferedToHelp" Inherits="Greeting"
          IfTestState="UD_FleshGolems_Asked_HelpFindMadMonger"
          IfNotHaveState="UD_FleshGolems_Reacted_HelpFindMadMonger"
          SetBooleanState="UD_FleshGolems_Reacted_HelpFindMadMonger,true" />
    
    <node ID="ReactWhoMadMonger">
      <text>
        Rarp, fraf! Yoo not heer-raf {{emote|*sputter*}}-uh Mad 'Monger!?

        Ra-{{emote|*hack*}} rah Mad... {{emote|*wheeze*}}... 'Monger mabe... er... Raff..
        
        ... Mong- mabed... me?
      </text>
      <choice UseID="AskHeMadeYou" />
      <choice UseID="AskWhereMadMonger" />
      <choice UseID="AskHelpFindMadMonger" />
      <choice UseID="GoStart" />
      <choice UseID="GoEnd" />
    </node>
    
    <node ID="ReactHeMadeYou">
      <text>
        Yip yip!

        Yeh, raff! Mabed Jofo! Yah!

        {{emote|*wobbles excitedly*}}
      </text>
      <choice UseID="AskWhoMadMonger" />
      <choice UseID="AskWhereMadMonger" />
      <choice UseID="AskHelpFindMadMonger" />
      <choice UseID="GoStart" />
      <choice UseID="GoEnd" />
    </node>
    
    <node ID="ReactWhereMadMonger">
      <text>
        {{emote|*looks as confused as a lightly rotted corpse can look*}}

        Fra-{{emote|*snap-snap*}} rahf!!

        Mad... err... 'Monger is??

        Is... ssss-{{emote|*wheeze*}}... uh.. Graa-feff!

        {{emote|*shrugs or slumps, you can't really tell*}}
      </text>
      <choice UseID="AskWhoMadMonger" />
      <choice UseID="AskHeMadeYou" />
      <choice UseID="AskHelpFindMadMonger" />
      <choice UseID="GoStart" />
      <choice UseID="GoEnd" />
    </node>
    
    <node ID="ReactHelpFindMadMonger">
      <text>
        Rarooh!!

        Yih yih yih-{{emote|*cough*}}!

        {{emote|*cough*}} {{emote|*cough*}}
        
        {{emote|*wheeze*}}

        Greff-ref!!
        
        {{emote|*starts side-stepping circles around you*}}
      </text>
      <choice UseID="AskWhoMadMonger" />
      <choice UseID="AskHeMadeYou" />
      <choice UseID="AskWhereMadMonger" />
      <choice UseID="GoStart" Target="Greeting" />
      <choice UseID="GoEnd" />
    </node>
    
  </conversation>
</conversations>
